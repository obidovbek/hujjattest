"use strict";(self.webpackChunkplatform3=self.webpackChunkplatform3||[]).push([[497],{1497:(U,_,d)=>{d.r(_),d.d(_,{GroupsModule:()=>G});var u=d(9808),a=d(2382),p=d(1810),c=d(1777),v=d(394),b=d(2488),h=d(7846),g=d(6e3),e=d(5e3),f=d(8104);function C(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.error)}}function Z(i,s){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t.area)}}let x=(()=>{class i extends g.FO{constructor(t,o){super(),this.formBuilder=t,this.dataService=o,this.title="",this.question="",this.message="",this.area="",this.abbreviation="",this.error="",this.form=this.formBuilder.group({}),this.createAccountForm()}apply(){const t=this.dataService.areas.filter(o=>o.area.replace(/ /g,"")===this.form.value.area.replace(/ /g,""));console.log(this.form.value),console.log(this.dataService.areas),console.log(t),t&&t[0]&&(this.form.controls.abbreviation.patchValue(t[0].abbreviation),this.result=JSON.stringify(this.form.value)),this.close()}onAdd(t){}checkForSimilarGroup(t){const o=t.srcElement.value;this.error=this.dataService.groups.find(n=>n.name===o)?"Bunday nomli guruh kirizilgan":""}createAccountForm(){this.form=this.formBuilder.group({courseNumber:["",a.kI.required],name:["",a.kI.required],area:[""],abbreviation:[""],groupCap:["",a.kI.required]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(f.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["prompt"]],features:[e.qOj],decls:47,vars:4,consts:[[1,"modal-content",3,"formGroup","submit"],[1,"modal-header"],[1,"modal-body"],[1,"modal-body_item"],[1,"modal-body_item_sec"],["formControlName","courseNumber",1,"modal-body_item_sec"],["selected","","value",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],[1,"modal-body_item","mtop10"],[1,"modal-body_item_sec","red"],[4,"ngIf"],["type","text","formControlName","name","name","name",1,"form-control",3,"input"],["formControlName","area"],[4,"ngFor","ngForOf"],["type","text","formControlName","groupCap","name","name",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return o.apply()}),e.TgZ(1,"div",1)(2,"h4"),e._uU(3,"Guruh qo\u2018shish"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"label"),e._uU(7,"Nechinki kurs"),e.qZA(),e.TgZ(8,"div",4)(9,"select",5)(10,"option",6),e._uU(11," -- tanlash -- "),e.qZA(),e.TgZ(12,"option",7),e._uU(13,"1"),e.qZA(),e.TgZ(14,"option",8),e._uU(15,"2"),e.qZA(),e.TgZ(16,"option",9),e._uU(17,"3"),e.qZA(),e.TgZ(18,"option",10),e._uU(19,"4"),e.qZA(),e.TgZ(20,"option",11),e._uU(21,"5"),e.qZA()()()(),e.TgZ(22,"div",12)(23,"label"),e._uU(24,"Guruh raqami"),e.qZA(),e.TgZ(25,"div",13),e.YNc(26,C,2,1,"div",14),e.TgZ(27,"div")(28,"input",15),e.NdJ("input",function(r){return o.checkForSimilarGroup(r)}),e.qZA()()()(),e.TgZ(29,"div",12)(30,"label"),e._uU(31,"Yo\u2018nalish"),e.qZA(),e.TgZ(32,"div",4)(33,"select",16)(34,"option",6),e._uU(35," -- tanlash -- "),e.qZA(),e.YNc(36,Z,2,1,"option",17),e.qZA()()(),e.TgZ(37,"div",12)(38,"label"),e._uU(39,"Guruhdagi talabalar soni"),e.qZA(),e.TgZ(40,"div",4),e._UZ(41,"input",18),e.qZA()()(),e.TgZ(42,"div",19)(43,"button",20),e.NdJ("click",function(){return o.close()}),e._uU(44,"Bekor qilish"),e.qZA(),e.TgZ(45,"button",21),e._uU(46,"Tasdiqlash"),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(26),e.Q6J("ngIf",o.error),e.xp6(10),e.Q6J("ngForOf",o.dataService.areas),e.xp6(9),e.Q6J("disabled",o.form.invalid||o.error))},directives:[a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,a.YN,a.Kr,u.O5,a.Fj,u.sg],styles:[".modal-body_item[_ngcontent-%COMP%]{display:flex;align-items:center}.modal-body_item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:0 0 30%}.modal-body_item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;box-sizing:border-box;resize:none;color:#000;background:#fff;border:1px solid #e0e0e0;font-size:13px;padding-left:17px;height:34px}.modal-body_item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:5px;box-sizing:border-box;resize:none;color:#000;background:#fff;border:1px solid #e0e0e0;font-size:13px;padding-left:17px;height:34px;width:100%}.modal-body_item_sec[_ngcontent-%COMP%]{flex:0 0 70%}.mtop10[_ngcontent-%COMP%]{margin-top:10px}.red[_ngcontent-%COMP%]{color:red}"]}),i})(),T=(()=>{class i{constructor(t){this.router=t,this.value="",this.save=new e.vpe}ngOnInit(){}edit(){this.save.emit({type:"edit",rowData:this.rowData})}trash(){this.save.emit({type:"trash",rowData:this.rowData})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["list-button-view"]],inputs:{value:"value",rowData:"rowData"},outputs:{save:"save"},decls:5,vars:0,consts:[[1,"d-flex","flex-nowrap","text-white","center"],["type","button","title","Qatorni o\u2018zgartirish",1,"btn","btn-info",3,"click"],[1,"fa","fa-edit"],["type","button","title","Qatorni o\u2018zgartirish",1,"btn","btn-info","left",3,"click"],[1,"fa","fa-trash"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return o.edit()}),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return o.trash()}),e._UZ(4,"i",4),e.qZA()())},styles:[".center[_ngcontent-%COMP%]{justify-content:center}.pending[_ngcontent-%COMP%]{color:#000;font-size:20px}.green[_ngcontent-%COMP%]{color:#3ceb3c;font-size:20px}.left[_ngcontent-%COMP%]{margin-left:10px}.btn[_ngcontent-%COMP%]{padding:3px 0 0;border-radius:50%;width:30px;height:30px}"]}),i})();function M(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.error)}}function y(i,s){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t.area)}}let A=(()=>{class i extends g.FO{constructor(t,o){super(),this.formBuilder=t,this.dataService=o,this.title="",this.question="",this.message="",this.area="",this.abbreviation="",this.error="",this.form=this.formBuilder.group({}),this.createAccountForm()}ngOnInit(){var t=JSON.parse(this.question);delete t.file_name,this.form.setValue(t)}apply(){const t=this.dataService.areas.filter(o=>o.area===this.form.value.area);t&&t[0]&&(this.form.controls.abbreviation.patchValue(t[0].abbreviation),this.result=JSON.stringify(this.form.value)),this.close()}checkForSimilarGroup(t){const o=JSON.parse(this.question),n=t.srcElement.value;this.error=this.dataService.groups.find(r=>r.name===n&&r.name!==o.name)?"Bunday nomli guruh kirizilgan":""}onAdd(t){}createAccountForm(){this.form=this.formBuilder.group({courseNumber:[""],name:[""],area:[""],abbreviation:[""],groupCap:[""]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(f.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["prompt"]],features:[e.qOj],decls:47,vars:4,consts:[[1,"modal-content",3,"formGroup","submit"],[1,"modal-header"],[1,"modal-body"],[1,"modal-body_item"],[1,"modal-body_item_sec"],["formControlName","courseNumber",1,"modal-body_item_sec"],["selected","","value",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],[1,"modal-body_item","mtop10"],[1,"modal-body_item_sec","red"],[4,"ngIf"],["type","text","formControlName","name","name","name",1,"form-control",3,"input"],["formControlName","area"],[4,"ngFor","ngForOf"],["type","text","formControlName","groupCap","name","name",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return o.apply()}),e.TgZ(1,"div",1)(2,"h4"),e._uU(3,"Guruh qo\u2018shish"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"label"),e._uU(7,"Nechinki kurs"),e.qZA(),e.TgZ(8,"div",4)(9,"select",5)(10,"option",6),e._uU(11," -- tanlash -- "),e.qZA(),e.TgZ(12,"option",7),e._uU(13,"1"),e.qZA(),e.TgZ(14,"option",8),e._uU(15,"2"),e.qZA(),e.TgZ(16,"option",9),e._uU(17,"3"),e.qZA(),e.TgZ(18,"option",10),e._uU(19,"4"),e.qZA(),e.TgZ(20,"option",11),e._uU(21,"5"),e.qZA()()()(),e.TgZ(22,"div",12)(23,"label"),e._uU(24,"Guruh raqami"),e.qZA(),e.TgZ(25,"div",13),e.YNc(26,M,2,1,"div",14),e.TgZ(27,"div")(28,"input",15),e.NdJ("input",function(r){return o.checkForSimilarGroup(r)}),e.qZA()()()(),e.TgZ(29,"div",12)(30,"label"),e._uU(31,"Yo\u2018nalish"),e.qZA(),e.TgZ(32,"div",4)(33,"select",16)(34,"option",6),e._uU(35," -- tanlash -- "),e.qZA(),e.YNc(36,y,2,1,"option",17),e.qZA()()(),e.TgZ(37,"div",12)(38,"label"),e._uU(39,"Guruhdagi talabalar soni"),e.qZA(),e.TgZ(40,"div",4),e._UZ(41,"input",18),e.qZA()()(),e.TgZ(42,"div",19)(43,"button",20),e.NdJ("click",function(){return o.close()}),e._uU(44,"Bekor qilish"),e.qZA(),e.TgZ(45,"button",21),e._uU(46,"Tasdiqlash"),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(26),e.Q6J("ngIf",o.error),e.xp6(10),e.Q6J("ngForOf",o.dataService.areas),e.xp6(9),e.Q6J("disabled",o.form.invalid||o.error))},directives:[a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,a.YN,a.Kr,u.O5,a.Fj,u.sg],styles:[".modal-body_item[_ngcontent-%COMP%]{display:flex;align-items:center}.modal-body_item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:0 0 30%}.modal-body_item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;box-sizing:border-box;resize:none;color:#000;background:#fff;border:1px solid #e0e0e0;font-size:13px;padding-left:17px;height:34px}.modal-body_item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:5px;box-sizing:border-box;resize:none;color:#000;background:#fff;border:1px solid #e0e0e0;font-size:13px;padding-left:17px;height:34px;width:100%}.modal-body_item_sec[_ngcontent-%COMP%]{flex:0 0 70%}.mtop10[_ngcontent-%COMP%]{margin-top:10px}.red[_ngcontent-%COMP%]{color:red}"]}),i})();var S=d(505),q=d(4691);function O(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().addItem()}),e.TgZ(3,"button",4),e._uU(4,"Guruh qo\u2018shish"),e.qZA()(),e.TgZ(5,"ng2-smart-table",5),e.NdJ("deleteConfirm",function(n){return e.CHM(t),e.oxw().onDeleteConfirm(n)})("editConfirm",function(n){return e.CHM(t),e.oxw().onEditConfirm(n)})("create",function(n){return e.CHM(t),e.oxw().openCreateDialog(n)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("settings",t.settings)("source",t.dataSource)}}const w=[{path:"",children:[{path:"",component:(()=>{class i{constructor(t,o,n){this.dataService=t,this.SimpleModalService=o,this.httpService=n,this.dataSource=new h.nC,this.area=this.dataService.areas,this.settings={pager:{display:!0},actions:{add:!1,edit:!1,delete:!1,position:"right"},columns:{courseNumber:{title:"Kurs"},name:{title:"Guruh"},area:{title:"Yo\u2018nalish"},abbreviation:{title:"Qisqartmasi"},groupCap:{title:"Guruhdagi talabalar soni"},edit:{title:"Harakatlar",type:"custom",renderComponent:T,onComponentInitFunction:r=>{r.save.subscribe(l=>{"edit"===l.type?this.editRowModal(l.rowData):this.trashRowModal(l.rowData)})}}}}}trashRowModal(t){var o;this.dataSource.data.map((n,r)=>{n.name===t.name&&(o=r)}),this.SimpleModalService.addModal(S.X,{title:"O\u2018chirish",message:"Qatorni aniq o\u2018chirmoqchimisiz?"}).subscribe(n=>{n&&(o||0===o?(this.dataService.startLoading(),this.httpService.genTokForReq().then(r=>{this.httpService.removeGroup(r,t.file_name).subscribe(l=>{console.log("addArea",l),200===l.status?(this.dataSource.data.splice(o,1),this.dataSource.refresh(),this.dataService.finishLoading()):this.showError()},l=>{this.showError(),console.error(l)})},r=>{this.showError()})):this.showError())})}editRowModal(t){var o;this.dataSource.data.map((n,r)=>{n.name===t.name&&(o=r)}),console.log("edit",t),this.SimpleModalService.addModal(A,{title:"Baholash",question:JSON.stringify(t)}).subscribe(n=>{if(console.log(JSON.parse(n)),n){var r=JSON.parse(n);o||0===o?(r.file_name=t.file_name,this.dataService.startLoading(),this.httpService.genTokForReq().then(l=>{this.httpService.editGroup(l,r.file_name,r).subscribe(m=>{console.log("editGroup",m),200===m.status?(this.dataSource.data[o]=r,this.dataSource.refresh(),this.dataService.finishLoading()):this.showError()},m=>{this.showError(),console.error(m)})},l=>{this.showError()})):this.showError()}})}addItem(){this.SimpleModalService.addModal(x,{title:"Baholash",question:"Ulushni kirgizing"}).subscribe(t=>{var o=JSON.parse(t);o&&this.httpService.genTokForReq().then(n=>{this.dataService.startLoading(),this.httpService.addGroup(n,o).subscribe(r=>{console.log("addArea",r),200===r.status?(o.file_name=r.file_name,this.dataService.groups.unshift(o),this.dataSource.refresh()):this.showError(),this.dataService.finishLoading()},r=>{this.showError(),console.error(r)})},n=>{this.showError()})})}showError(){alert("Nimadur hato ketti yana bir bor urinib ko'ring!"),this.dataService.finishLoading()}ngOnInit(){this.dataService.loading?this.httpService.getTimetable().then(t=>{t&&(this.dataSource.data=this.dataService.groups,this.dataService.loading=!1)}):this.dataSource.data=this.dataService.groups}onDeleteConfirm(t){console.log("onDeleteConfirm",t)}onEditConfirm(t){console.log("onEditConfirm",t)}openCreateDialog(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.D),e.Y36(g.yK),e.Y36(q.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-groups"]],decls:1,vars:1,consts:[["class","demo-app",4,"ngIf"],[1,"demo-app"],[1,"demo-app-main"],[3,"click"],[1,"btn","btn-primary"],["id","excelTable",3,"settings","source","deleteConfirm","editConfirm","create"]],template:function(t,o){1&t&&e.YNc(0,O,6,2,"div",0),2&t&&e.Q6J("ngIf",!o.dataService.loading)},directives:[u.O5,h.T5],styles:["h2[_ngcontent-%COMP%]{margin:0;font-size:16px}ul[_ngcontent-%COMP%]{margin:0;padding:0 0 0 1.5em}li[_ngcontent-%COMP%]{margin:1.5em 0;padding:0}b[_ngcontent-%COMP%]{margin-right:3px}.demo-app[_ngcontent-%COMP%]{min-height:100%;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:14px;padding-top:100px;width:1200px;margin:0 auto}.demo-app-sidebar[_ngcontent-%COMP%]{width:300px;line-height:1.5;background:#eaf9ff;border-right:1px solid #d3e2e8}.demo-app-sidebar-section[_ngcontent-%COMP%]{padding:2em}.selected[_ngcontent-%COMP%]{background:rgba(0,0,0,.2)}"],data:{animation:[b.NB,(0,c.X$)("enterFromLeftLeaveToRight",[(0,c.eR)(":enter",(0,v.zV)("300ms","20px")),(0,c.eR)(":leave",(0,c._7)(v.jp,{params:{time:"2000ms",endPos:"100px"}}))])]}}),i})(),data:{title:"Guruhlar",breadcrumb:"Guruhlar"}}]}];let N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.Bz.forChild(w)],p.Bz]}),i})(),G=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[u.ez,N,h.ne,a.u5,a.UX]]}),i})()}}]);